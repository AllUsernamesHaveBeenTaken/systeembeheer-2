{\rtf1\ansi\ansicpg1252\cocoartf1404\cocoasubrtf470
{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fnil\fcharset0 LucidaGrande;}
{\colortbl;\red255\green255\blue255;\red31\green31\blue31;}
\paperw11900\paperh16840\margl1440\margr1440\vieww12280\viewh18680\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0

\f0\fs24 \cf0 \'97\'97\'97\'97\'97\'97\'97\
W I N D O W S \
\'97\'97\'97\'97\'97\'97\'97\
DNS\'92en van school\
	1: 10.129.28.230\
	2: 10.129.28.232\
\
OPZETTEN VIRTUELE OPGEVING\
\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97		\
1. Basis Instellingen \
	* Check internet connectie\
		DNS: 10.129.28.230\
	* Maak een extra admin\
	* Computernaam veranderen\
		Windows Server\
			Start>Computer>Properties\
		Window 10\
			Settings>System>About\
		Powershell\
			Rename-Computer\
\
2. Management Console & Event Viewer\
	* Console = run > mmc.exe\
	* File Add/Remove Snap-in\'85 Event Viewer`\
	* IIS vanop cli\'ebnt beheren\
		Server:\
			Add Roles and Features Wizzard > Server Roles > Web Server (IIS) > Ma	nagement Tools > Management Service\
			DNS\
		Cli\'ebnt:\
			ISS manager downloaden\
\
3. Webserver\
	* Instaleer de nodige rollen\
	* IIS path aan passen \
		In IIS -> S1 > Sites > Default Web Site (rechts klikken) > manage > advanced \
		C:\\server\
	* Index.html \
	* Surf naar 192.168.1.1\
\
\
FILESERVER EN POWERSHELL\
\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\
Powershell openen: \
	in cmd \'91powershell\'92 [enter] \
Computernaam aanpassen\
	Rename-Computer -NewName S2\
Ga netwerkinstellingen na met Get-NetIPConfiguration\
Stel juiste dns in: Set-DnsClientServerAddress -InterfaceIndex xx \'96ServerAddress ("10.129.28.232")\
	vind dns index: netsh interface ipv4 show interfaces\
	xx ==> gebruik index van ethernet0\
Computer herstarten: Restart-computer\
\
4. Aanmaken Share\
	* Module downloaded adhv ftp\
		Firewall uitzetten\
			Set-NetFirewallProfile -Profile Public -Enabled False\
		Maak een ftp connectie\
			cd $PSHOME/modules\
			New-Item naam map -type directory\
			ftp\
			open\
			to pbaictfile2.acad.kahosl.be\
			log ins as: Anonymous \
			PS: leeg\
			cd Public/systeembeheer2\
			get localusermodule.psm1\
		Firewall aanzetten\
			Set-NetFirewallProfile -Profile Public -Enabled True\
		Zet executionpolicy op bypass om ongesigneerde modules te installeren\
			Set-ExecutionPolicy Bypass\
		Importeer de module\
			Import-Module localusermodule.psm1\
		Zie wat deze module kan\
			Get-Command -module local*\
		Bekijk users \
			Get-WmiObject -Class Win32_UserAccount\
		Bekijk users in een groep\
			Net localgroup iis_iusrs\
		Maak een nieuwe dir op de c-schijf\
			New-Item "C:\\server" -Type "directory"\
		Maak smb share\
			New-SmbShare -Name "servershare" -Path "C:\\server" -FullAccess "everyone"\
		Vraag NTFS rechten op\
			Get-Acl C:\\server -AllCentralAccessPolicies | Format-List\
		Die NTFS rechten in een var\
			$s = Get-acl \'93C:\\server\'94\
		Var met rechten\
			$perm = \'91iis_iusrs\'92, \'92readandexecute\'92, \'91ContainerInherit, ObjectInherit\'92, \'91None\'92, \'91Allow\'92\
		Een of andere permissiregel in een var\
			$rule = New-Object System.Security.AccessControl.FileSystemAccessRule($perm)\
		Voeg de regel toe aan $s\
			$s.SetAccessRule($rule)\
		Stel de rechten van de dir in met $s\
			$s | Set-Acl -Path \'93C:\\server\'94\
5. Aankoppelen Share\
	* Maak een user www-data Azerty123 op S2\
	* Koppel de S1 share op S2 met schijf x\
		New-PSDrive \'96Name \'93x\'94 \'96PSProvider FileSystem \'96Root \'93\\\\S2\\servershare\'94 \'96Persist (op s1)\
	* Maak een lijst van alle lopende processen op s2 en drop die in een lijst in html\
		Get-Process | ConvertTo-Html | Out-File \'93C:\\server\\index.html\'94\
		\
	* in iis\
		Path naar \\\\s2\\webservershare\
\
ALLEENSTAANDE DOMEINCONTROLLER\
\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\
	* Instaleer de rol Active Directory Domain Services\
		Tijdens de installatie\
			Kies voor een nieuwe forest\
			Kies een naam voor je domein\
			[De wizzard zal het domein onder .eu willen aanmaken en aan gezien de provider hier geen delegatie heeft gemaakt zal onze domain enkel lokaal werken. .eu kan de delegatie overslaan]\
			Bekijk het script met view script en controleer op fouten\
		Kies na installatie voor promotie tot AD\
\
CHECK:\
Dns aangemaakt?\
snoeck.eu werk?\
src records? -> in dns manager>forward lookup zones> snoeck.eu>_tcp\
is dir sysvol aangemaakt met dir policies en scripts\
test opstelling met dcdiag.exe\
als het heropstarten lang duurt dan is er waarschijnlijk een fout bij de dns server\
\'93organizational units\'94 \
	run -> Active Directory Users and Computers\
\
	* Client toevoegen aan domain\
		ipv4 DNS naar ip van server veranderen\
		System properties > domain change\
		Herstart\
	*Server toevoegen via powershell\
		DNS veranderen naar 192.168.1.1\
		Add-Computer -ComputerName S2 -DomainName snoeck.eu \
		Restart-computer\
Staat de toegevoegde computer niet in de OU, start dan het programma opnieuw op\
AD toevoegen aan console\
\
DNS SERVER ROL\
\'97\'97\'97\'97\'97\'97\'97\'97\'97\
	* Om 2e server grafisch te configureren\
		powershell\
			winrm qc\
			sconfig\
				remote aanzetten\
		firewall\
		\
			Set-NetFirewallRule -DisplayGroup 'Windows Management Instrumentation (WMI)' -Enabled true \'96PassThru\
			Set-NetFirewallRule -DisplayGroup 'Remote Event Log Management' -Enabled true -PassThru\
	* Aanmaken forward zone\
		Binnen S1 nieuwe zone aanmaken\
\
gewoon doen\
Nets firewall set impcsettiang all enable
\f1\b\fs26 \cf2 \expnd0\expndtw0\kerning0
\
\pard\pardeftab720\sl360\partightenfactor0
\cf2 	
\f0\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 * Aanmaken forwardzone\
		Nieuwe primary zone\
		A record S1 naar ip\
		name serverbrussel naar s1\
		name www naar serverbrussel\
		a record (same as parent) naar ip\
	* Aanmaken reverse zone\
		pointers aanmaken\
	* DNS server tekst bestanden\
		in cmd\
			dnscmd /zoneexport snoeck.eu snoeck.eu.dns\
			plaats: system32/dns\
	* dns forwarders\
		
\f1\b\fs26 \cf2 \expnd0\expndtw0\kerning0
\
\

\f0\b0\fs24 \cf0 \kerning1\expnd0\expndtw0 \
}